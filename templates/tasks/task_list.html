{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Tasks</h1>
  <a class="btn btn-primary" href="{% url 'tasks:task_create' %}">Create Task</a>
</div>
<table class="table">
  <thead>
    <tr>
      <th>Title</th>
      <th>Due</th>
      <th>Completed</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr class="{% if task.completed %}table-success{% endif %}">
      <td>{{ task.title }}</td>
      <td>{% if task.due_date %}{{ task.due_date }}{% else %}-{% endif %}</td>
      <td>
        <form method="post" action="{% url 'tasks:task_toggle' task.pk %}">{% csrf_token %}
          <button type="submit" class="btn btn-sm {% if task.completed %}btn-success{% else %}btn-outline-secondary{% endif %}">{% if task.completed %}Done{% else %}Mark{% endif %}</button>
        </form>
      </td>
      <td>
        <a class="btn btn-sm btn-outline-primary" href="{% url 'tasks:task_update' task.pk %}">Edit</a>
        <a class="btn btn-sm btn-outline-danger" href="{% url 'tasks:task_delete' task.pk %}">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4">No tasks yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
